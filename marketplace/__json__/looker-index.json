{
  "frontmatter": {
    "id": "looker-index",
    "status": "published",
    "name": "Looker",
    "title": "Dagster & Looker",
    "excerpt": "The Looker integration allows you to monitor your Looker project as assets in Dagster, along with other data assets.",
    "logoFilename": "looker.svg",
    "partnerlink": "https://www.looker.com/",
    "categories": ["BI"],
    "enabledBy": [],
    "enables": [],
    "tags": ["dagster-supported", "bi"]
  },
  "content": "import Beta from '@site/docs/partials/\\_Beta.md';\n\n<Beta />\n\nDagster allows you to represent your Looker project as assets, alongside other your other technologies like dbt and Sling. This allows you to see how your Looker assets are connected to your other data assets, and how changes to other data assets might impact your Looker project.\n\n### Installation\n\n```bash\npip install dagster-looker\n```\n\n### Represent Looker assets in the asset graph\n\nTo load Looker assets into the Dagster asset graph, you must first construct a <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"LookerResource\" />, which allows Dagster to communicate with your Looker instance. You'll need to supply your Looker instance URL and API credentials, which can be passed directly or accessed from the environment using <PyObject section=\"resources\" module=\"dagster\" object=\"EnvVar\" />.\n\nDagster can automatically load all views, explores, and dashboards from your Looker instance as asset specs. Call the <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"load_looker_asset_specs\" /> function, which returns a list of <PyObject section=\"assets\" module=\"dagster\" object=\"AssetSpec\" pluralize /> representing your Looker assets. You can then include these asset specs in your <PyObject section=\"definitions\" module=\"dagster\" object=\"Definitions\" /> object:\n\n\n```python\nfrom dagster_looker import LookerResource, load_looker_asset_specs\n\nimport dagster as dg\n\nlooker_resource = LookerResource(\n    client_id=dg.EnvVar(\"LOOKERSDK_CLIENT_ID\"),\n    client_secret=dg.EnvVar(\"LOOKERSDK_CLIENT_SECRET\"),\n    base_url=dg.EnvVar(\"LOOKERSDK_HOST_URL\"),\n)\n\nlooker_specs = load_looker_asset_specs(looker_resource=looker_resource)\ndefs = dg.Definitions(assets=[*looker_specs], resources={\"looker\": looker_resource})\n```\n        \n\n### Load Looker assets from filtered dashboards and explores\n\nIt is possible to load a subset of your Looker assets by providing a <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"LookerFilter\" /> to the <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"load_looker_asset_specs\" /> function. All dashboards contained in the folders provided to your <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"LookerFilter\" /> will be fetched. Additionally, only the explores used in these dashboards will be fetched by passing only_fetch_explores_used_in_dashboards=True to your <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"LookerFilter\" />.\n\nNote that the content and size of Looker instance may affect the performance of your Dagster deployments. Filtering the dashboards and explores selection from which your Looker assets will be loaded is particularly useful for improving loading times.\n\n### Customize asset definition metadata for Looker assets\n\n\n```python\nfrom dagster_looker import LookerFilter, LookerResource, load_looker_asset_specs\n\nimport dagster as dg\n\nlooker_resource = LookerResource(\n    client_id=dg.EnvVar(\"LOOKERSDK_CLIENT_ID\"),\n    client_secret=dg.EnvVar(\"LOOKERSDK_CLIENT_SECRET\"),\n    base_url=dg.EnvVar(\"LOOKERSDK_HOST_URL\"),\n)\n\nlooker_specs = load_looker_asset_specs(\n    looker_resource=looker_resource,\n    looker_filter=LookerFilter(\n        dashboard_folders=[\n            [\"my_folder\", \"my_subfolder\"],\n            [\"my_folder\", \"my_other_subfolder\"],\n        ],\n        only_fetch_explores_used_in_dashboards=True,\n    ),\n)\ndefs = dg.Definitions(assets=[*looker_specs], resources={\"looker\": looker_resource})\n```\n        \n\nBy default, Dagster will generate asset specs for each Looker asset based on its type, and populate default metadata. You can further customize asset properties by passing a custom <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"DagsterLookerApiTranslator\" /> subclass to the <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"load_looker_asset_specs\" /> function. This subclass can implement methods to customize the asset specs for each Looker asset type.\n\n\n```python\nfrom dagster_looker import (\n    DagsterLookerApiTranslator,\n    LookerApiTranslatorStructureData,\n    LookerResource,\n    LookerStructureType,\n    load_looker_asset_specs,\n)\n\nimport dagster as dg\n\nlooker_resource = LookerResource(\n    client_id=dg.EnvVar(\"LOOKERSDK_CLIENT_ID\"),\n    client_secret=dg.EnvVar(\"LOOKERSDK_CLIENT_SECRET\"),\n    base_url=dg.EnvVar(\"LOOKERSDK_HOST_URL\"),\n)\n\n\nclass CustomDagsterLookerApiTranslator(DagsterLookerApiTranslator):\n    def get_asset_spec(\n        self, looker_structure: LookerApiTranslatorStructureData\n    ) -> dg.AssetSpec:\n        # We create the default asset spec using super()\n        default_spec = super().get_asset_spec(looker_structure)\n        # We customize the team owner tag for all assets,\n        # and we customize the asset key prefix only for dashboards.\n        return default_spec.replace_attributes(\n            key=(\n                default_spec.key.with_prefix(\"looker\")\n                if looker_structure.structure_type == LookerStructureType.DASHBOARD\n                else default_spec.key\n            ),\n            owners=[\"team:my_team\"],\n        )\n\n\nlooker_specs = load_looker_asset_specs(\n    looker_resource, dagster_looker_translator=CustomDagsterLookerApiTranslator()\n)\ndefs = dg.Definitions(assets=[*looker_specs], resources={\"looker\": looker_resource})\n```\n        \n\nNote that `super()` is called in each of the overridden methods to generate the default asset spec. It is best practice to generate the default asset spec before customizing it.\n\n### Materialize Looker PDTs from Dagster\n\nYou can use Dagster to orchestrate the materialization of Looker PDTs. To model PDTs as assets, build their asset definitions by passing a list of <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"RequestStartPdtBuild\" /> to <PyObject section=\"libraries\" module=\"dagster_looker\" object=\"build_looker_pdt_assets_definitions\" /> function.\n\n\n```python\nfrom dagster_looker import (\n    LookerResource,\n    RequestStartPdtBuild,\n    build_looker_pdt_assets_definitions,\n    load_looker_asset_specs,\n)\n\nimport dagster as dg\n\nlooker_resource = LookerResource(\n    client_id=dg.EnvVar(\"LOOKERSDK_CLIENT_ID\"),\n    client_secret=dg.EnvVar(\"LOOKERSDK_CLIENT_SECRET\"),\n    base_url=dg.EnvVar(\"LOOKERSDK_HOST_URL\"),\n)\n\nlooker_specs = load_looker_asset_specs(looker_resource=looker_resource)\n\npdts = build_looker_pdt_assets_definitions(\n    resource_key=\"looker\",\n    request_start_pdt_builds=[\n        RequestStartPdtBuild(model_name=\"my_model\", view_name=\"my_view\")\n    ],\n)\n\n\ndefs = dg.Definitions(\n    assets=[*pdts, *looker_specs],\n    resources={\"looker\": looker_resource},\n)\n```\n        \n\n### About Looker\n\n**Looker** is a modern platform for data analytics and visualization. It provides a unified interface for data exploration, modeling, and visualization, making it easier to understand and analyze data. Looker integrates with various data sources and can be used to create interactive reports, dashboards, and visualizations."
}
