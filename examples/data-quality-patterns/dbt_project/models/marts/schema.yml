version: 2

models:
  - name: cleaned_customers
    description: Cleaned customer data with quality issues filtered out
    config:
      tags: ["marts"]
    columns:
      - name: customer_id
        description: Unique customer identifier
        data_tests:
          - unique:
              config:
                severity: warn
          - not_null:
              config:
                severity: warn
      - name: email
        data_tests:
          - not_null:
              config:
                severity: warn
      - name: region
        data_tests:
          - accepted_values:
              arguments:
                values: ['US', 'EU', 'APAC', 'LATAM']
              config:
                severity: warn
      - name: age
        data_tests:
          - not_null:
              config:
                severity: warn

  - name: order_summary
    description: Aggregated order metrics by customer
    config:
      tags: ["marts"]
    columns:
      - name: customer_id
        description: Unique customer identifier
        data_tests:
          - unique:
              config:
                severity: warn
          - not_null:
              config:
                severity: warn
      - name: total_orders
        data_tests:
          - not_null:
              config:
                severity: warn
      - name: total_amount
        data_tests:
          - not_null:
              config:
                severity: warn
