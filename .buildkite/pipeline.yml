# Minimal pipeline for testing issue-31069
# Tests the implementation of boilerplate definitions.py with @definitions and load_from_defs_folder

steps:
  - label: ":python: Simple test"
    command: |
      # Create a venv and install packages
      python -m venv venv
      source venv/bin/activate
      pip install --upgrade pip
      
      # Install dagster from the correct subdirectory
      cd python_modules/dagster
      pip install -e "."
      
      # Test scaffolding a new project
      mkdir -p /tmp/test_project
      cd /tmp/test_project
      python -m dagster project scaffold --name myproject
      
      # Verify that the template contains @definitions and load_from_defs_folder
      grep -q "@definitions" myproject/myproject/definitions.py
      grep -q "load_from_defs_folder" myproject/myproject/definitions.py
      
      echo "âœ… Success! Template contains required functionality."
    agents:
      queue: "default"
