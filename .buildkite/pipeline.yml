steps:
  - label: ":test_tube: CLI Test"
    command: |
      cd /workspaces/dagster 
      python -m venv venv
      source venv/bin/activate
      pip install pytest --upgrade pip
      python -m pytest python_modules/dagster/dagster_tests/logging_tests/ -v --override-ini="addopts="
    agents:
      queue: "default"

  - label: ":mag: Ruff Format Check"
    command: |
      cd /workspaces/dagster
      source venv/bin/activate
      pip install ruff==0.11.5
      ruff check python_modules/dagster/dagster/_generate/templates/
    agents:
      queue: "default"

  - label: ":gear: Scaffold Definition Template"
    command: |
      cd /workspaces/dagster
      source venv/bin/activate
      rm -rf /tmp/test_scaffold 
      mkdir -p /tmp/test_scaffold
      cd /tmp/test_scaffold
      python -m dagster project scaffold --name test_project
      test -f test_project/definitions.py && echo "âœ… definitions.py created" || true
    agents:
      queue: "default"