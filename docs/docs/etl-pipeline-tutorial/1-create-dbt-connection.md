---
title: Create dbt connection
description: Connect to dbt to transform
sidebar_position: 20
---

Next you will use [dbt](https://www.getdbt.com/) to model the data brought in from Sling in DuckDB. This data will serve as the foundation for the rest of the ETL tutorial.

- Integrate with dbt
- Generate software-defined assets from a dbt project

## 1. Clone the sample dbt project from GitHub

First, clone the sample dbt project and delete the embedded git repository:

```bash
git clone --depth=1 https://github.com/dagster-io/jaffle-platform.git dbt && rm -rf dbt/.git
```

:::note

You can set up this part of the Dagster project using either components or assets that you define yourself. Both options will provide you with the same functionality in Dagster. You can use components and assets together so choose whichever option you prefer for each section.

:::

<Tabs>
    <TabItem value="components" label="Components">
        **1. Define the Sling Component**

        ```bash
        dg scaffold defs dagster_dbt.DbtProjectComponent jdbt --project-path dbt/jdbt
        ```

        :::note

        The dbt component was added when you `uv pip install` the dependency at the beginning of this tutorial

        :::

        This creates a new directory at jaffle_platform/defs/jdbt. To see the component configuration, open defs.yaml in that directory:

        ```yaml
        type: dagster_dbt.DbtProjectComponent

        attributes:
            project: '{{ project_root }}/dbt/jdbt'
        ```

        **2. Update the dbt project component configuration**

        To see the new dbt assets in the Dagster UI, run dg dev:

        ```bash
        dg dev
        ```

        ![DAG with dbt assets](/images/guides/build/projects-and-components/components/dbt-1.png)

        You can see that there appear to be two copies of the raw_customers, raw_orders, and raw_payments tables. If you click on the new assets, you will see that the asset keys generated by the dbt project component contain main/*, whereas the keys generated by the Sling component contain target/main/*.

        To fix this, you will need to update the dbt project component configuration to match the keys generated by the Sling component. Update components/jdbt/defs.yaml with the configuration below:

        ```yaml
        type: dagster_dbt.DbtProjectComponent

        attributes:
            project: "{{ project_root }}/dbt/jdbt"
            translation:
                key: "target/main/{{ node.name }}"
        ```

        To verify the fix, click Reload definitions in the Dagster UI:

        ![DAG with reloaded definitions](/images/guides/build/projects-and-components/components/dbt-2.png)

        Now the asset keys generated by the Sling and dbt project components match, and the asset graph has the expected assets.

    </TabItem>
    <TabItem value="assets" label="Assets">

        **1. Scaffold the assets**

        :::note

        If you scaffolded the assets in a previous step, you do not need to scaffold the assets again

        :::

        First you need to scaffold a file for the assets. This can be done using the `dg` cli.

        ```bash
        dg scaffold defs dagster.asset assets.py
        ```

        **2. Define the asset code**

        dddddfsfadfsafafafafafafaf

        <CodeExample
            path="docs_snippets/docs_snippets/guides/tutorials/etl_tutorial_components/src/etl_tutorial_components/defs/sling_assets.py"
            language="python"
            title="src/etl_tutorial_components/defs/sling_assets.py"
        />

        zfgasfdsafasfasdf

       **3. Scaffold the resources**

        :::note

        If you scaffolded the assets in a previous step, you do not need to scaffold the assets again

        :::

        Next we can define the resource that our assets rely on. Again we can use `dg` to scaffold our resources files and ensure it is in the correction location.

        ```bash
        dg scaffold defs dagster.resource resource.py
        ```

        **4. Define the resource code**

        <CodeExample
            path="docs_snippets/docs_snippets/guides/tutorials/etl_tutorial_components/_int/resources.py"
            language="python"
            startAfter="start_sling_resource"
            endBefore="end_sling_resource"
            title="src/etl_tutorial_components/defs/resources.py"
        />

    </TabItem>
</Tabs>
